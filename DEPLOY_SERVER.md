# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ CRUSTA MIA –Ω–∞ Vercel

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ `https://pizzatest-orcin.vercel.app`, –Ω–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞. 
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `/api/pay`, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
# –ù–∞–∑–≤–∞–Ω–∏–µ: crusta-mia-server
# –û–ø–∏—Å–∞–Ω–∏–µ: Backend server for CRUSTA MIA Telegram WebApp
```

### 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É server/ –≤ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
crusta-mia-server/
‚îú‚îÄ‚îÄ index.ts          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ payments.ts   # –õ–æ–≥–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ http/
‚îÇ       ‚îî‚îÄ‚îÄ pay.ts    # HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç
‚îú‚îÄ‚îÄ package.json      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ tsconfig.json     # TypeScript –∫–æ–Ω—Ñ–∏–≥
‚îú‚îÄ‚îÄ vercel.json       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îî‚îÄ‚îÄ .env.example      # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vercel –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
```json
// vercel.json
{
  "version": 2,
  "builds": [
    {
      "src": "index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/index.ts"
    }
  ],
  "env": {
    "TELEGRAM_BOT_TOKEN": "@telegram_bot_token",
    "TG_PROVIDER_TOKEN": "@tg_provider_token",
    "PAYMENTS_CURRENCY": "RUB"
  }
}
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Vercel –¥–æ–±–∞–≤–∏—Ç—å:
- `TELEGRAM_BOT_TOKEN`: `8276450519:AAElkwWgkmSOtU1aYGv_NrhPUuDT_SgAH2g`
- `TG_PROVIDER_TOKEN`: `1744374395:TEST:337495814f69076f8fcb`
- `PAYMENTS_CURRENCY`: `RUB`

### 5. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –æ–±–Ω–æ–≤–∏—Ç—å URL –≤ `src/pages/CartPage.tsx`:
```typescript
const serverUrl = import.meta.env.VITE_SERVER_URL || 
  (import.meta.env.DEV 
    ? 'http://localhost:3001'
    : 'https://crusta-mia-server.vercel.app');  // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL
```

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–µ—Ä–≤–µ—Ä–∞
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `crusta-mia-server`
3. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã —Å–µ—Ä–≤–µ—Ä–∞
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ `server/`
2. –°–æ–∑–¥–∞—Ç—å `vercel.json`
3. –û–±–Ω–æ–≤–∏—Ç—å `package.json` –¥–ª—è Vercel

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ Vercel
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Vercel
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü–æ–ª—É—á–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
1. –û–±–Ω–æ–≤–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–¥–µ
2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

## üìã –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

### vercel.json
```json
{
  "version": 2,
  "builds": [
    {
      "src": "index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/index.ts"
    }
  ]
}
```

### package.json (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
```json
{
  "name": "crusta-mia-server",
  "version": "1.0.0",
  "description": "Backend server for CRUSTA MIA Telegram WebApp",
  "main": "index.ts",
  "scripts": {
    "dev": "tsx watch index.ts",
    "build": "tsc",
    "start": "node dist/index.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "telegraf": "^4.15.6",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "@types/express": "^4.17.21",
    "@types/cors": "^2.8.17",
    "@types/node": "^20.10.5",
    "tsx": "^4.6.2",
    "typescript": "^5.3.3"
  }
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- –§—Ä–æ–Ω—Ç–µ–Ω–¥: `https://pizzatest-orcin.vercel.app`
- –°–µ—Ä–≤–µ—Ä: `https://crusta-mia-server.vercel.app`
- API: `https://crusta-mia-server.vercel.app/api/pay`

–û—à–∏–±–∫–∞ "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑" –∏—Å—á–µ–∑–Ω–µ—Ç!
