:root{
  --bg: #d9d9d9;                 /* фон приложения */
  --surface: #efefef;            /* светлая поверхность внутри */
  --ink: #111318;                /* основной текст */
  --muted: #646a73;              /* вторичный текст */
  --line: rgba(0,0,0,.14);       /* разделители/бордеры */
  --chip-bg: #f6f6f6;
  --chip-border: rgba(0,0,0,.16);
  --radius: 12px;
  --radius-pill: 999px;
}

/* Корневой контейнер конструктора (две колонки на десктопе) */
.hb{
  display:grid; grid-template-columns: 1fr 1.3fr; gap:24px;
  padding: 8px 16px 96px;
}
@media (max-width: 768px){
  .hb{ grid-template-columns: 1fr; gap:16px; }
}

/* Шапка секции "Собрать" (опционально, если есть) */
.hb-title{
  font-weight: 800; letter-spacing:.04em; text-transform: uppercase;
  padding: 4px 0 8px; color: var(--ink);
  border-bottom: 1px solid var(--line);
  margin-bottom: 12px;
}

/* Левая панель: список */
.hb-left .chips{ display:flex; gap:8px; margin:0 0 12px; }
.hb-left .chip{
  padding:8px 12px; border-radius: var(--radius-pill);
  border:1px solid var(--chip-border); background:var(--chip-bg);
  font-weight:600; font-size:13px; color:var(--ink);
}
.hb-left .chip.is-active{ background:#e9e9e9; border-color: var(--line); }

.hb-list{ border-top:1px solid var(--line); }
.hb-item{
  display:grid; grid-template-columns: 1fr auto auto; align-items:center;
  gap:12px; padding:12px 0; border-bottom:1px solid var(--line);
}
.hb-item .name{ font-weight:700; color:var(--ink); }
.hb-item .price{ font-weight:800; color:var(--ink); white-space:nowrap; }
.hb-item .pick{
  min-width: 104px; text-align: center; padding: 8px 12px; border-radius: 999px;
  border: 1px solid var(--chip-border); background: #fff; font-weight: 700; font-size: 13px;
  color: var(--ink); cursor: pointer; transition: all 0.2s ease;
}
.hb-item .pick:active{ transform: scale(.98); }
.hb-item:hover .pick{ border-color: var(--line); }

/* Правая панель: превью + слоты + итог */
.hb-right{
  background: var(--surface); border:1px solid var(--line);
  border-radius: var(--radius); padding:16px; position: relative; padding-bottom: 88px;
}

.hb-disk{
  width:160px; height:160px; margin:8px auto 16px; position:relative;
  border-radius:50%; border:1px solid var(--line);
  background: radial-gradient(ellipse at 60% 40%, rgba(255,255,255,.35), rgba(0,0,0,.02));
}
.hb-disk::before{
  content:''; position:absolute; left:50%; top:0; bottom:0; width:1px; background:var(--line);
}
.hb-disk .slice{
  position:absolute; width:50%; height:100%; display:flex;
  align-items:center; justify-content:center; text-align:center;
  padding:6px; font-size:12px; color:var(--muted); transition: all 0.2s ease;
}
.hb-disk .left{ left:0; } .hb-disk .right{ right:0; }
.hb-disk .left.active, .hb-disk .right.active{ color: var(--ink); font-weight: 700; }

.hb-slots{ display:grid; gap:10px; }
.hb-slot{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-radius: var(--radius);
  border:1px dashed var(--line); background: #f9f9f9; cursor: pointer;
  transition: all 0.2s ease;
}
.hb-slot.filled{ border-style: solid; background:#fff; }
.hb-slot.active{ border-color: rgba(0,0,0,.28); box-shadow: 0 0 0 3px rgba(0,0,0,.06) inset; }
.hb-slot .meta{ max-width:70%; }
.hb-slot .meta .label{ font-size:12px; color:var(--muted); }
.hb-slot .meta .value{ font-weight:700; color:var(--ink); }

.hb-slot .actions{ display:flex; gap:8px; }
.hb-btn{ 
  padding:8px 12px; border:1px solid var(--chip-border); border-radius: var(--radius-pill); 
  background:#fff; font-weight:700; font-size: 12px; cursor: pointer; transition: all 0.2s ease;
}
.hb-btn:active{ transform: scale(.98); }

/* Sticky bar */
.hb-sticky{
  position: sticky; bottom: 0; left: 0; right: 0;
  display: grid; grid-template-columns: 1fr auto; grid-template-rows: auto auto; gap: 8px;
  background: var(--surface); padding: 12px 16px; border-top: 1px solid var(--line);
  margin: 0 -16px -16px -16px; border-radius: 0 0 var(--radius) var(--radius);
}
.hb-summary{ grid-column: 1 / 2; color: var(--muted); font-size: 13px; }
.hb-total{ 
  grid-column: 2 / 3; justify-self: end; font-weight: 800; font-size: 18px; color: var(--ink);
  transition: opacity 160ms ease, transform 160ms ease;
}
.hb-total.on-total-change{ opacity:0; transform: translateY(2px); }
.hb-add{ 
  grid-column: 1 / 3; width: 100%; padding: 12px 16px; border-radius: 999px; 
  border: 1.5px solid var(--ink); background: transparent; color: var(--ink); 
  font-weight: 800; cursor: pointer; transition: transform 120ms ease;
}
.hb-add:enabled{ box-shadow: inset 0 0 0 1px rgba(0,0,0,.02); }
.hb-add:enabled:active{ transform: scale(.98); }
.hb-add:disabled{ opacity:.45; pointer-events:none; }

/* Микро-анимации */
@keyframes hb-pop { from{ transform:scale(.98); opacity:.0 } to{ transform:scale(1); opacity:1 } }
@keyframes fillIn { from{ opacity:.0; transform: scale(.96) } to{ opacity:1; transform: scale(1) } }
.hb-right{ animation: hb-pop 120ms ease-out; }
.hb-slot.filled{ animation: fillIn 140ms ease-out; }
